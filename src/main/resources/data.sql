DROP TABLE IF EXISTS books;
DROP TABLE IF EXISTS authors;
DROP TABLE IF EXISTS genres;

CREATE TABLE authors (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    birth_year INT,
    country VARCHAR(100),
    biography VARCHAR(1000)
);

CREATE TABLE genres (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL UNIQUE,
    description VARCHAR(500)
);

CREATE TABLE books (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    author_id BIGINT NOT NULL,
    genre_id BIGINT NOT NULL,
    publication_year INT NOT NULL,
    isbn VARCHAR(20),
    pages INT,
    quantity INT DEFAULT 0,
    description VARCHAR(1000),
    FOREIGN KEY (author_id) REFERENCES authors(id),
    FOREIGN KEY (genre_id) REFERENCES genres(id)
);

INSERT INTO authors (first_name, last_name, birth_year, country, biography) VALUES
('Лев', 'Толстой', 1828, 'Россия', 'Классик русской литературы, автор романов "Война и мир", "Анна Каренина"'),
('Федор', 'Достоевский', 1821, 'Россия', 'Великий русский писатель, философ и мыслитель'),
('Александр', 'Пушкин', 1799, 'Россия', 'Величайший русский поэт, драматург и прозаик'),
('Антон', 'Чехов', 1860, 'Россия', 'Классик мировой литературы, мастер короткого рассказа'),
('Михаил', 'Булгаков', 1891, 'Россия', 'Автор знаменитого романа "Мастер и Маргарита"'),
('Николай', 'Гоголь', 1809, 'Россия', 'Классик русской литературы, автор "Мертвых душ"'),
('Иван', 'Тургенев', 1818, 'Россия', 'Русский писатель-реалист, поэт, переводчик'),
('Владимир', 'Набоков', 1899, 'Россия/США', 'Русский и американский писатель, поэт, переводчик'),
('Джоан', 'Роулинг', 1965, 'Великобритания', 'Британская писательница, автор серии о Гарри Поттере'),
('Джордж', 'Оруэлл', 1903, 'Великобритания', 'Английский писатель и публицист'),
('Фрэнсис', 'Фицджеральд', 1896, 'США', 'Американский писатель, крупнейший представитель "потерянного поколения"'),
('Эрнест', 'Хемингуэй', 1899, 'США', 'Американский писатель, журналист, лауреат Нобелевской премии'),
('Агата', 'Кристи', 1890, 'Великобритания', 'Английская писательница, "королева детектива"'),
('Стивен', 'Кинг', 1947, 'США', 'Американский писатель, работающий в жанрах ужасов, триллера'),
('Харпер', 'Ли', 1926, 'США', 'Американская писательница, автор романа "Убить пересмешника"');

INSERT INTO genres (name, description) VALUES
('Роман', 'Художественное произведение большого объема, повествующее о судьбе персонажей'),
('Поэзия', 'Стихотворные произведения различных форм и размеров'),
('Драма', 'Драматические произведения для театральных постановок'),
('Фантастика', 'Произведения, основанные на научных или фантастических допущениях'),
('Детектив', 'Произведения, посвящённые расследованию преступлений'),
('Ужасы', 'Произведения, предназначенные вызвать чувство страха у читателя'),
('Триллер', 'Произведения, вызывающие острые эмоциональные переживания'),
('Фэнтези', 'Жанр фантастической литературы, основанный на мифологических и сказочных мотивах'),
('Классика', 'Произведения, признанные классическими образцами литературы'),
('Приключения', 'Произведения о приключениях, путешествиях и опасностях'),
('Исторический', 'Произведения, действие которых происходит в прошлом'),
('Научная литература', 'Научные и научно-популярные произведения'),
('Биография', 'Описание жизни и деятельности выдающихся личностей'),
('Юмор', 'Юмористические и сатирические произведения'),
('Детская литература', 'Произведения, написанные специально для детей');

INSERT INTO books (title, author_id, genre_id, publication_year, isbn, pages, quantity, description) VALUES
('Война и мир', 1, 1, 1869, '978-5-17-090021-5', 1225, 10, 'Эпопея, описывающая русское общество в эпоху войн против Наполеона'),
('Преступление и наказание', 2, 1, 1866, '978-5-17-090021-6', 672, 8, 'Роман о нравственных страданиях студента Раскольникова'),
('Евгений Онегин', 3, 2, 1833, '978-5-17-090021-7', 320, 15, 'Роман в стихах, одно из самых значительных произведений русской словесности'),
('Вишневый сад', 4, 3, 1904, '978-5-17-090021-8', 96, 12, 'Пьеса о судьбе русской усадьбы и её владельцев'),
('Мастер и Маргарита', 5, 4, 1967, '978-5-17-090021-9', 480, 20, 'Роман, сочетающий мистику, сатиру и философские размышления'),
('Мёртвые души', 6, 1, 1842, '978-5-17-090022-0', 352, 7, 'Поэма о похождениях авантюриста Чичикова'),
('Отцы и дети', 7, 1, 1862, '978-5-17-090022-1', 288, 9, 'Роман о конфликте поколений в России XIX века'),
('Лолита', 8, 1, 1955, '978-5-17-090022-2', 336, 5, 'Скандальный роман о запретной любви'),
('Гарри Поттер и философский камень', 9, 8, 1997, '978-5-389-07483-6', 320, 25, 'Первая книга серии о юном волшебнике Гарри Поттере'),
('1984', 10, 1, 1949, '978-5-17-090022-3', 320, 18, 'Антиутопический роман о тоталитарном обществе'),
('Великий Гэтсби', 11, 1, 1925, '978-5-17-090022-4', 256, 14, 'Роман о "веке джаза" и американской мечте'),
('Старик и море', 12, 1, 1952, '978-5-17-090022-5', 128, 12, 'Повесть о борьбе старика-рыбака с большой рыбой'),
('Убить пересмешника', 15, 1, 1960, '978-5-17-090022-6', 416, 16, 'Роман о расовой несправедливости в американском Юге'),
('Анна Каренина', 1, 1, 1877, NULL, 864, 11, 'Роман о трагической любви замужней женщины Анны Карениной'),
('Братья Карамазовы', 2, 1, 1880, '', 840, 6, 'Последний роман Достоевского, философская драма о вере и сомнении'),
('Капитанская дочка', 3, 1, 1836, NULL, 256, 13, 'Исторический роман о пугачевском восстании'),
('Чайка', 4, 3, 1896, '', 80, 8, 'Пьеса о любви, искусстве и неудовлетворенности жизнью'),
('Собачье сердце', 5, 4, 1925, NULL, 192, 15, 'Фантастическая повесть о попытке превратить собаку в человека'),
('Шинель', 6, 1, 1842, '', 64, 10, 'Повесть о "маленьком человеке" Акакии Акакиевиче'),
('Ревизор', 6, 3, 1836, NULL, 128, 12, 'Комедия о чиновничьем произволе и взяточничестве'),
('Муму', 7, 1, 1854, '', 48, 20, 'Рассказ о глухонемом дворнике и его собаке'),
('Бежин луг', 7, 1, 1851, NULL, 96, 9, 'Рассказ о встрече с крестьянскими детьми, ночующими в поле'),
('Ася', 7, 1, 1858, '', 112, 11, 'Повесть о несчастной любви молодого человека и девушки'),
('Десять негритят', 13, 5, 1939, '978-5-17-090022-7', 256, 22, 'Классический детектив о серии загадочных убийств'),
('Восточный экспресс', 13, 5, 1934, '978-5-17-090022-8', 224, 19, 'Знаменитый детектив Эркюля Пуаро'),
('Оно', 14, 6, 1986, '978-5-17-090022-9', 1136, 8, 'Роман ужасов о древнем зле, терроризирующем маленький город'),
('Сияние', 14, 6, 1977, '978-5-17-090023-0', 512, 15, 'Психологический триллер о семье, живущей в отрезанном от мира отеле'),
('Зеленая миля', 14, 7, 1996, '978-5-17-090023-1', 448, 13, 'Тюремная драма с элементами фантастики'),
('Властелин колец', 9, 8, 1954, '978-5-17-090023-2', 1200, 30, 'Эпическая фэнтези-сага о борьбе за Кольцо Всевластья'),
('Хоббит', 9, 8, 1937, '978-5-17-090023-3', 320, 28, 'Сказочная повесть о путешествии хоббита Бильбо Бэггинса'),
('Алиса в Стране чудес', 9, 8, 1865, '978-5-17-090023-4', 192, 25, 'Сказка о приключениях девочки Алисы в фантастическом мире'),
('Код да Винчи', 14, 5, 2003, '978-5-17-090023-5', 480, 21, 'Детективный триллер о тайных обществах и религиозных загадках'),
('Ангелы и демоны', 14, 5, 2000, '978-5-17-090023-6', 560, 18, 'Приключенческий роман о противостоянии науки и религии'),
('Три товарища', 12, 1, 1936, '978-5-17-090023-7', 480, 14, 'Роман о дружбе и любви в послевоенной Германии'),
('По ком звонит колокол', 12, 1, 1940, '978-5-17-090023-8', 576, 10, 'Роман о гражданской войне в Испании'),
('Портрет Дориана Грея', 10, 1, 1890, '978-5-17-090023-9', 320, 17, 'Философский роман о красоте, морали и вечной молодости'),
('Скотный двор', 10, 9, 1945, '978-5-17-090024-0', 144, 20, 'Аллегорическая повесть-сатира на тоталитаризм'),
('Игра престолов', 14, 8, 1996, '978-5-17-090024-1', 800, 24, 'Первая книга эпической серии "Песнь льда и пламени"'),
('Голодные игры', 14, 4, 2008, '978-5-17-090024-2', 384, 26, 'Антиутопический роман о тоталитарном государстве и телевизионных играх на выживание'),
('Сумерки', 14, 4, 2005, '978-5-17-090024-3', 448, 30, 'Роман о любви между девушкой-подростком и вампиром'),
('Девушка в поезде', 13, 5, 2015, '978-5-17-090024-4', 416, 19, 'Психологический триллер о женщине, ставшей свидетельницей загадочного происшествия'),
('Маленькие женщины', 15, 1, 1868, '978-5-17-090024-5', 432, 22, 'Роман о взрослении четырёх сестер из семьи Марч'),
('Гордость и предубеждение', 13, 1, 1813, '978-5-17-090024-6', 416, 27, 'Классический роман о любви и социальных предрассудках');

UPDATE authors SET biography = CONCAT(biography, '. Автор более 10 романов и повестей.') WHERE id IN (1, 2, 3, 4, 5);